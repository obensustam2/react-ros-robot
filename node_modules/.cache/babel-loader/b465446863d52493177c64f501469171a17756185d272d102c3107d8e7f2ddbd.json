{"ast":null,"code":"/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Message = require('../core/Message');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * An actionlib goal goal is associated with an action server.\n *\n * Emits the following events:\n *  * 'timeout' - if a timeout occurred while sending a goal\n *\n *  @constructor\n *  @param object with following keys:\n *   * actionClient - the ROSLIB.ActionClient to use with this goal\n *   * goalMessage - The JSON object containing the goal for the action server\n */\nfunction Goal(options) {\n  var that = this;\n  this.actionClient = options.actionClient;\n  this.goalMessage = options.goalMessage;\n  this.isFinished = false;\n\n  // Used to create random IDs\n  var date = new Date();\n\n  // Create a random ID\n  this.goalID = 'goal_' + Math.random() + '_' + date.getTime();\n  // Fill in the goal message\n  this.goalMessage = new Message({\n    goal_id: {\n      stamp: {\n        secs: 0,\n        nsecs: 0\n      },\n      id: this.goalID\n    },\n    goal: this.goalMessage\n  });\n  this.on('status', function (status) {\n    that.status = status;\n  });\n  this.on('result', function (result) {\n    that.isFinished = true;\n    that.result = result;\n  });\n  this.on('feedback', function (feedback) {\n    that.feedback = feedback;\n  });\n\n  // Add the goal\n  this.actionClient.goals[this.goalID] = this;\n}\nGoal.prototype.__proto__ = EventEmitter2.prototype;\n\n/**\n * Send the goal to the action server.\n *\n * @param timeout (optional) - a timeout length for the goal's result\n */\nGoal.prototype.send = function (timeout) {\n  var that = this;\n  that.actionClient.goalTopic.publish(that.goalMessage);\n  if (timeout) {\n    setTimeout(function () {\n      if (!that.isFinished) {\n        that.emit('timeout');\n      }\n    }, timeout);\n  }\n};\n\n/**\n * Cancel the current goal.\n */\nGoal.prototype.cancel = function () {\n  var cancelMessage = new Message({\n    id: this.goalID\n  });\n  this.actionClient.cancelTopic.publish(cancelMessage);\n};\nmodule.exports = Goal;","map":{"version":3,"names":["Message","require","EventEmitter2","Goal","options","that","actionClient","goalMessage","isFinished","date","Date","goalID","Math","random","getTime","goal_id","stamp","secs","nsecs","id","goal","on","status","result","feedback","goals","prototype","__proto__","send","timeout","goalTopic","publish","setTimeout","emit","cancel","cancelMessage","cancelTopic","module","exports"],"sources":["/home/oben-n/react-ros-robot/node_modules/roslib/src/actionlib/Goal.js"],"sourcesContent":["/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Message = require('../core/Message');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * An actionlib goal goal is associated with an action server.\n *\n * Emits the following events:\n *  * 'timeout' - if a timeout occurred while sending a goal\n *\n *  @constructor\n *  @param object with following keys:\n *   * actionClient - the ROSLIB.ActionClient to use with this goal\n *   * goalMessage - The JSON object containing the goal for the action server\n */\nfunction Goal(options) {\n  var that = this;\n  this.actionClient = options.actionClient;\n  this.goalMessage = options.goalMessage;\n  this.isFinished = false;\n\n  // Used to create random IDs\n  var date = new Date();\n\n  // Create a random ID\n  this.goalID = 'goal_' + Math.random() + '_' + date.getTime();\n  // Fill in the goal message\n  this.goalMessage = new Message({\n    goal_id : {\n      stamp : {\n        secs : 0,\n        nsecs : 0\n      },\n      id : this.goalID\n    },\n    goal : this.goalMessage\n  });\n\n  this.on('status', function(status) {\n    that.status = status;\n  });\n\n  this.on('result', function(result) {\n    that.isFinished = true;\n    that.result = result;\n  });\n\n  this.on('feedback', function(feedback) {\n    that.feedback = feedback;\n  });\n\n  // Add the goal\n  this.actionClient.goals[this.goalID] = this;\n}\n\nGoal.prototype.__proto__ = EventEmitter2.prototype;\n\n/**\n * Send the goal to the action server.\n *\n * @param timeout (optional) - a timeout length for the goal's result\n */\nGoal.prototype.send = function(timeout) {\n  var that = this;\n  that.actionClient.goalTopic.publish(that.goalMessage);\n  if (timeout) {\n    setTimeout(function() {\n      if (!that.isFinished) {\n        that.emit('timeout');\n      }\n    }, timeout);\n  }\n};\n\n/**\n * Cancel the current goal.\n */\nGoal.prototype.cancel = function() {\n  var cancelMessage = new Message({\n    id : this.goalID\n  });\n  this.actionClient.cancelTopic.publish(cancelMessage);\n};\n\nmodule.exports = Goal;"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,IAAIA,OAAO,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AACxC,IAAIC,aAAa,GAAGD,OAAO,CAAC,eAAe,CAAC,CAACC,aAAa;;AAE1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,IAAI,CAACC,OAAO,EAAE;EACrB,IAAIC,IAAI,GAAG,IAAI;EACf,IAAI,CAACC,YAAY,GAAGF,OAAO,CAACE,YAAY;EACxC,IAAI,CAACC,WAAW,GAAGH,OAAO,CAACG,WAAW;EACtC,IAAI,CAACC,UAAU,GAAG,KAAK;;EAEvB;EACA,IAAIC,IAAI,GAAG,IAAIC,IAAI,EAAE;;EAErB;EACA,IAAI,CAACC,MAAM,GAAG,OAAO,GAAGC,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,GAAGJ,IAAI,CAACK,OAAO,EAAE;EAC5D;EACA,IAAI,CAACP,WAAW,GAAG,IAAIP,OAAO,CAAC;IAC7Be,OAAO,EAAG;MACRC,KAAK,EAAG;QACNC,IAAI,EAAG,CAAC;QACRC,KAAK,EAAG;MACV,CAAC;MACDC,EAAE,EAAG,IAAI,CAACR;IACZ,CAAC;IACDS,IAAI,EAAG,IAAI,CAACb;EACd,CAAC,CAAC;EAEF,IAAI,CAACc,EAAE,CAAC,QAAQ,EAAE,UAASC,MAAM,EAAE;IACjCjB,IAAI,CAACiB,MAAM,GAAGA,MAAM;EACtB,CAAC,CAAC;EAEF,IAAI,CAACD,EAAE,CAAC,QAAQ,EAAE,UAASE,MAAM,EAAE;IACjClB,IAAI,CAACG,UAAU,GAAG,IAAI;IACtBH,IAAI,CAACkB,MAAM,GAAGA,MAAM;EACtB,CAAC,CAAC;EAEF,IAAI,CAACF,EAAE,CAAC,UAAU,EAAE,UAASG,QAAQ,EAAE;IACrCnB,IAAI,CAACmB,QAAQ,GAAGA,QAAQ;EAC1B,CAAC,CAAC;;EAEF;EACA,IAAI,CAAClB,YAAY,CAACmB,KAAK,CAAC,IAAI,CAACd,MAAM,CAAC,GAAG,IAAI;AAC7C;AAEAR,IAAI,CAACuB,SAAS,CAACC,SAAS,GAAGzB,aAAa,CAACwB,SAAS;;AAElD;AACA;AACA;AACA;AACA;AACAvB,IAAI,CAACuB,SAAS,CAACE,IAAI,GAAG,UAASC,OAAO,EAAE;EACtC,IAAIxB,IAAI,GAAG,IAAI;EACfA,IAAI,CAACC,YAAY,CAACwB,SAAS,CAACC,OAAO,CAAC1B,IAAI,CAACE,WAAW,CAAC;EACrD,IAAIsB,OAAO,EAAE;IACXG,UAAU,CAAC,YAAW;MACpB,IAAI,CAAC3B,IAAI,CAACG,UAAU,EAAE;QACpBH,IAAI,CAAC4B,IAAI,CAAC,SAAS,CAAC;MACtB;IACF,CAAC,EAAEJ,OAAO,CAAC;EACb;AACF,CAAC;;AAED;AACA;AACA;AACA1B,IAAI,CAACuB,SAAS,CAACQ,MAAM,GAAG,YAAW;EACjC,IAAIC,aAAa,GAAG,IAAInC,OAAO,CAAC;IAC9BmB,EAAE,EAAG,IAAI,CAACR;EACZ,CAAC,CAAC;EACF,IAAI,CAACL,YAAY,CAAC8B,WAAW,CAACL,OAAO,CAACI,aAAa,CAAC;AACtD,CAAC;AAEDE,MAAM,CAACC,OAAO,GAAGnC,IAAI"},"metadata":{},"sourceType":"script","externalDependencies":[]}